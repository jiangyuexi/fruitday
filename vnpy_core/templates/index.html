<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <meta http-equiv="keywords" content="关键字,关键字,关键字"/>
  <meta http-equiv="pragma" content="no-cache"/>
  <meta http-equiv="cache-control" content="no-cache"/>
  <meta http-equiv="expires" content="0"/>
  <meta name="description" content="页面描述不超过150个字符"/>
  <meta name="Author" content="页面作者"/>
  <meta name="renderer" content="webkit"/>
  <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"/>
  <link rel="shortcut icon" href="../static/favicon.ico" type="image/x-icon" >
  <link rel="stylesheet" type="text/css" href="../static/layui/dist/css/layui.css"/>
  <link rel="stylesheet" href="../static/stylesheets/gx_main.min.css" />
  <link rel="stylesheet" type="text/css" href="../static/iconfont/iconfont.css">
  <!--[if lt IE 9]>
  <script src="../static/html5shiv/dist/html5shiv.min.js"></script>
  <script src="../static/respond/dest/respond.min.js"></script>
  <![endif]-->
  <script src="../static/jquery/dist/jquery.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="../static/layui/dist/layui.js" type="text/javascript" charset="utf-8"></script>
  <script type="text/javascript" src="../static/highcharts-5.0.14/code/highcharts.js"></script>
  <!--mine-->
  <script src="../static/javascripts/gx_main.min.js" type="text/javascript" charset="utf-8"></script>
</head>
<body class="gx_index">
<div class="layui-layout layui-layout-admin">
  <!--头部-->

  <!--导航-->
  <div class="layui-side layui-bg-lightBlue" id="gx_nav">
    <div class="layui-side-scroll">
      <div class="gx_navTitle">小工具</div>
      <ul class="layui-nav layui-nav-tree" lay-filter="test">
        <li class="layui-nav-item">
          <a href="javascript:;">
			<span class="iconfont icon-gx_peiZhi"></span><span class="gb_navText">账号管理</span>
		  </a>
		  <dl class="layui-nav-child">
		    <dd><a href="javascript:;" frame="account_info.html" id="account_info">账号接入</a></dd>
          </dl>
          <dl class="layui-nav-child">
		    <dd><a href="javascript:;" frame="trade_operation.html" id="trade_operation">交易操作</a></dd>
          </dl>
          <dl  class="layui-nav-child">
            <dd><a href="javascript:;" frame="sub_candlestick.html" id="sub_candlestick">显示行情</a></dd>
          </dl>
          <dl  class="layui-nav-child">
            <dd><a href="javascript:;" frame="candlestick-sh-2015.html" id="candlestick-sh-2015">显示行情1</a></dd>
          </dl>
        </li>
		<li class="layui-nav-item">
          <a href="javascript:;" frame="sub_equipStatus.html" id="sbzt">
			<span class="iconfont icon-gx_zhuangTai"></span><span class="gb_navText">设备状态</span>
		  </a>
        </li>

      </ul>
    </div>
  </div>

  <!--右侧面板-->
  <div class="layui-body" id="gx_body">
    <div class="layui-tab" lay-filter="gx_frame" lay-allowclose="true">
      <ul class="layui-tab-title" id="gx_tabContent"></ul>
      <div class="layui-tab-content"></div>
    </div>
  </div>
</div>

<script>
  layui.use(['element','layer','jquery'], function(){
    var element = layui.element,$ = layui.jquery, layer = layui.layer; //独立版的layer无需执行这一句   

    //点击导航调用页面
	$(document).ready(function(){
		//设置sub_页面所在iframe的高度
		var windowH = $(window).height();
		var frameH = (windowH-132)<500?500:windowH-132;
		//左侧导航点击加载右侧iframe
		$('#gx_nav a').on("click",function (){
			var frame = $(this).attr('frame'), url = $(this).attr('url'),
			val = $(this).attr("value"), text = $(this).text(),
			id= $(this).attr("id");
			//判断是否存在子页面
			if(frame){
				//获取已存在的tab标签
				var li = $("#gx_tabContent li"),state = true;
				for(var i=0;i<li.length;i++){
					if($(li[i]).attr("lay-id") == id){
						//如果tab已经存在则跳转到相应tab
						element.tabChange('gx_frame', id);
						state= false;
						break;
						return;
					}
				}
				if(state){
					element.tabAdd('gx_frame',{
						title:text,
						content: '<iframe src="'+frame+'" height="'+frameH+'" frameborder="0" width="100%"></iframe>',
						id:id
					});
					element.tabChange('gx_frame', id);
				}
			//判断是否存在弹框
			}else if(url){
				if(val == 1){
					layer.open({
						type: 2               //此处以iframe举例
						,skin: 'gx_layer'     //弹出框皮肤
						,title: '<span class="iconfont icon-gx_jingGao"></span>警告'
						,area: ['450px', '200px']
						,shade: .5            //遮罩层透明度
						,maxmin: true         //头部关闭按钮
						,shadeClose:true      //点击遮罩层取消模态框
						,content: 'frame_factorySettings.html'
						,btn: ['确定', '取消'] //按钮
						,yes: function(){
						  layer.alert("ajax提交验证",function () {
							layer.closeAll();
						  });
						}
						,btn2: function(){
						  layer.closeAll();
						}
					});
				}
			}else{}
		});
		//初始化选项卡
		$('#gx_nav a').eq(0).trigger("click");
		$('#gx_body li').eq(0).trigger("click");
	});
	
	//窗口改变大小时
	$(window).resize(function(){
		var windowH = $(window).height();
		var frameH = (windowH-132)<500?500:windowH-132;
		$("#gx_body iframe").attr("height",frameH+"px");
	})
	
  });
</script>
</body>
</html>
