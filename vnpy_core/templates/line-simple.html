<!DOCTYPE html>
<html style="height: 100%">
   <head>
       <meta charset="utf-8">
   </head>
   <body style="height: 100%; margin: 0">
       <div id="container" style="height: 100%"></div>
       <script type="text/javascript" src="../static/echarts-4.2.1/dist/echarts.min.js"></script>
       <script type="text/javascript" src="../static/echarts-4.2.1/dist/echarts.js"></script>
       <script src="../static/jquery/dist/jquery.js"></script>
       <script src="../static/jquery/dist/jquery.min.js" type="text/javascript" charset="utf-8"></script>
        <script type="text/javascript">
        var dom = document.getElementById("container");
        var myChart = echarts.init(dom);
        var user = {};
        user.exchange = "BITMEX";
        user.gateway_name = "BITMEX";
        user.user_id = "jiangyuexi1992@qq.com";//获取文本
        user.symbol="XBTUSD";
        user.count=100;
        user.reverse = true;

        $.ajax({
        type:"POST",
        url:"get_history_founding_rate/",
        dataType:"json",
        contentType:"application/json",
        data:JSON.stringify(user),
        success:function(data){
            console.log(data.founding_rate);
            var rawData = data.founding_rate;
            var dates = rawData.map(function (item) {
                return item[0];
            });

            var fundingRate = rawData.map(function (item) {
                return item[3];
            });
            var fundingRateDaily = rawData.map(function (item) {
                return item[4];
            });
            option = null;

            option = {
                legend: {
                data:['fundingRate','fundingRateDaily']
                },
                xAxis: {
                    type: 'category',
                    data: dates
                },

                yAxis: [{
                    type: 'value'
                }, {
                    type: 'value'
                },
                ],
                series: [
                    {
                        name:"fundingRate",
                        data: fundingRate,
                        type: 'line'
                    },
                    {
                        name:"fundingRateDaily",
                        data: fundingRateDaily,
                        type: 'line'
                    }
                ]
            };



            if (option && typeof option === "object") {
                myChart.setOption(option, true);
            }
        },
        error:function(data){
            console.log("失败", data);
        }
     });


       </script>
   </body>
</html>